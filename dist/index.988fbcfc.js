function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}var t,n,i,r,o,a,s,l,d,p,u,c,h,g,m,f,v,b,y,x,w,S,k,A,L,M,D,E,C,$,P,_,F,T,z,R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},N={},O={},I=R.parcelRequired6be;function B(e){return e&&e.__esModule?e.default:e}function j(e){return new Array(e+1).fill(0).map(((t,n)=>n/e))}function H(e){return new Array(e+1).fill(0).map(((e,t)=>t+1)).map((t=>function(e,t){return(function(e,t){return Math.cos((2*e-1)/(2*t)*Math.PI)}(e,t)+1)/2}(t,e+1)))}null==I&&((I=function(e){if(e in N)return N[e].exports;if(e in O){var t=O[e];delete O[e];var n={id:e,exports:{}};return N[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){O[e]=t},R.parcelRequired6be=I),I.register("27Lyk",(function(t,n){var i,r;e(t.exports,"register",(()=>i),(e=>i=e)),e(t.exports,"resolve",(()=>r),(e=>r=e));var o={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},r=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),I("27Lyk").register(JSON.parse('{"aT88m":"index.988fbcfc.js","lpQ5Q":"slider.44e0a9e1.css"}')),t=Object.defineProperty,n=Math.pow,i=(e,n,i)=>(((e,n,i)=>{n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i})(e,"symbol"!=typeof n?n+"":n,i),i),r="pointers-overlap",o="pointers-min-distance",a="pointers-max-distance",s="range-dragging",l="data",d="step",p="round",u="type",c="theme",h="disabled",g="keyboard-disabled",m="animate-onclick",f="vertical",v="horizontal",b=(e,t,n,i,r)=>{let o=t-e;return 0===o?n:(i-n)*(r-e)/o+n},y=e=>!isNaN(parseFloat(e))&&isFinite(e),x=(e,t)=>y(e)?Number(e):t,w=(e,t)=>0===t?0:Math.round(e/t)*t,S=e=>null!=e&&("boolean"==typeof e?e:"true"===e.trim().toLowerCase()),k=(e,t,n)=>{let i,r,o,a,s=0,l=!1,d=t=>{if(!l){switch(t.key){case"ArrowLeft":t.preventDefault(),"function"==typeof i&&i(n);break;case"ArrowRight":t.preventDefault(),"function"==typeof r&&r(n);break;case"ArrowUp":t.preventDefault(),"function"==typeof o&&o(n);break;case"ArrowDown":t.preventDefault(),"function"==typeof a&&a(n)}((e,t)=>{e.dispatchEvent(new CustomEvent("onKeyDown",{detail:{nativeEvent:t}}))})(e,t)}},p=()=>{l||((e,t)=>{e.dispatchEvent(new CustomEvent("onPointerClicked",{detail:{$pointer:t}}))})(e,t)};return t.className=`pointer pointer-${n}`,t.addEventListener("keydown",d),t.addEventListener("click",p),{$pointer:t,get percent(){return s},get disabled(){return l},set disabled(e){l=e,t.classList.toggle("disabled",l),l?t.setAttribute("aria-disabled","true"):t.hasAttribute("aria-disabled")&&t.removeAttribute("aria-disabled")},updatePosition:(e,n,i,r,o,a)=>{void 0!==i&&e>i&&(e=i),void 0!==n&&e<n&&(e=n),s=e;let l=s;(r===f&&a||r===v&&o)&&(l=100-l),r===f?t.style.top=`${l}%`:t.style.left=`${l}%`},isClicked:e=>e===t||t.contains(e),setCallbacks:(e,t,n,s)=>{i=e,r=t,o=n,a=s},setAttr:(e,n)=>{null==n?t.removeAttribute(e):t.setAttribute(e,n)},getAttr:e=>t.getAttribute(e),destroy:()=>{t.removeEventListener("keydown",d),t.removeEventListener("click",p),t.remove()}}},A="--animate-onclick",L=(e,t,n)=>{let i=new Map;for(let r of e.attributes){let e=r.nodeName.trim().toLowerCase();if(!t.test(e))continue;let o=e.replace(/\D/g,"").trim(),a=""===o||"0"===o||"1"===o?0:x(o,0)-1,s=n&&"function"==typeof n?n(r.value):r.value;i.set(a,s)}return i},M=[["--width","slider-width","sliderWidth",null],["--height","slider-height","sliderHeight",null],["--panel-bg-border-radius","slider-radius","sliderRadius",null],["--panel-bg","slider-bg","sliderBg",null],["--panel-bg-hover","slider-bg-hover","sliderBgHover",null],["--panel-bg-fill","slider-bg-fill","sliderBgFill",null],["--pointer-width","pointer-width","pointer#Width",/^pointer([0-9]*)-width$/],["--pointer-height","pointer-height","pointer#Height",/^pointer([0-9]*)-height$/],["--pointer-border-radius","pointer-radius","pointer#Radius",/^pointer([0-9]*)-radius$/],["--pointer-bg","pointer-bg","pointer#Bg",/^pointer([0-9]*)-bg$/],["--pointer-bg-hover","pointer-bg-hover","pointer#BgHover",/^pointer([0-9]*)-bg-hover$/],["--pointer-bg-focus","pointer-bg-focus","pointer#BgFocus",/^pointer([0-9]*)-bg-focus$/],["--pointer-shadow","pointer-shadow","pointer#Shadow",/^pointer([0-9]*)-shadow$/],["--pointer-shadow-hover","pointer-shadow-hover","pointer#ShadowHover",/^pointer([0-9]*)-shadow-hover$/],["--pointer-shadow-focus","pointer-shadow-focus","pointer#ShadowFocus",/^pointer([0-9]*)-shadow-focus$/],["--pointer-border","pointer-border","pointer#Border",/^pointer([0-9]*)-border$/],["--pointer-border-hover","pointer-border-hover","pointer#BorderHover",/^pointer([0-9]*)-border-hover$/],["--pointer-border-focus","pointer-border-focus","pointer#BorderFocus",/^pointer([0-9]*)-border-focus$/]],D=(e,t,n)=>{let i=null,r=[],o=new Map,a=(e,n=t)=>{let i=[...n.classList];for(let n of i)n.startsWith(e)&&t.classList.remove(n)},s=()=>{a("shape");let e=t.querySelectorAll(".pointer");for(let t of e)a("shape",t)},l=e=>{i=e,a("theme-"),"string"==typeof e&&t.classList.add(`theme-${e}`)},d=()=>{if(s(),!(r.length<=0)){t.classList.add("shape",`shape-${r[0]}`);for(let e=1;e<r.length;e++){let n=r[e];if(!n)continue;let i=t.querySelector(`.pointer-${e}`);!i||i.classList.add("shape",`shape-${n}`)}}},p=(e,t)=>`${e}-${t}`,u=(e,i,r)=>{let a=n[r];if(!a)return;let s=0===r?t:a.$pointer;if(null==i)return o.has(p(e,r))&&o.delete(p(e,r)),void s.style.removeProperty(e);o.set(p(e,r),i),s.style.setProperty(e,i)},h=(e,t)=>o.get(p(e,t));return(()=>{for(let t of M){let[i,r,o,a]=t;if(a){let t=L(e,a);for(let e of t){let t=e[0],n=e[1];u(i,n,t)}}else{let t=e.getAttribute(r);u(i,t,0)}let s=[];if(-1===o.indexOf("#"))s.push([o,0]);else{s.push([o.replace("#",""),0]),s.push([o.replace("#","0"),0]),s.push([o.replace("#","1"),0]);for(let e=1;e<n.length;e++)s.push([o.replace("#",(e+1).toString()),e])}for(let t of s)try{let n=t[0],r=t[1];Object.prototype.hasOwnProperty.call(e,n)||Object.defineProperty(e,n,{get:()=>h(i,r),set:e=>{u(i,e,r)}})}catch(e){console.error(e)}}l(e.getAttribute(c)),(()=>{s();let t=L(e,/^pointer([0-9]*)-shape$/);if(!(t.size<=0)){for(let e of t){let t=e[0];r[t]=e[1]}d()}})()})(),{setStyle:u,getStyle:h,get theme(){return i},set theme(e){l(e)},get pointerShapes(){return r},setPointerShape:(e,t)=>{r[e]=t,d()}}},E="animate-on-click",C="range-dragging",$=(e,t,n,i,r,o,a)=>{try{Object.defineProperty(e,i,{configurable:!0,get(){if(!t)return;let e=t.pointers[n];if(!e)return;let i=t.getTextValue(e.percent);return y(i)?x(i,i):i},set:e=>{t.pointers[n]?null==t||t.setValue(e,n):null==t||t.addPointer(e)}}),Object.defineProperty(e,r,{configurable:!0,get(){var e,i;return null!=(i=null==(e=null==t?void 0:t.pointers[n])?void 0:e.getAttr("aria-label"))?i:void 0},set:e=>{!t||t.setAriaLabel(n,e)}}),Object.defineProperty(e,o,{configurable:!0,get(){var e,i;return null!=(i=null==(e=null==t?void 0:t.styles)?void 0:e.pointerShapes[n])?i:null},set:e=>{!t||!t.styles||t.styles.setPointerShape(n,e)}}),Object.defineProperty(e,a,{configurable:!0,get(){var e;return null!=(e=null==t?void 0:t.pointers[n].disabled)&&e},set:e=>{if(!t)return;let i=null==t?void 0:t.pointers[n];!i||(i.disabled=e)}})}catch(e){console.error(e)}},P=(e,t,n)=>{var i;let r=null==(i=n.shadowRoot)?void 0:i.querySelector(".container");if(r)for(let n of e)t?r.prepend(n.$pointer):r.append(n.$pointer)},_=100,F="0.3s",T=(e,t,i)=>{let c,M,$,T,z=i.map((e=>e[0])),R=null,N=null,O=null,I=null,B=0,j=_,H=v,q=2,G=!1,V=!1,U=!1,Y=0,J=1/0,Z=!1,Q=!1,W=!1,X=F,K=[],ee=t=>{Q||(t.preventDefault&&t.preventDefault(),ie(t),window.addEventListener("mousemove",ie),window.addEventListener("mouseup",te),((e,t)=>{e.dispatchEvent(new CustomEvent("onMouseDown",{detail:{nativeEvent:t}}))})(e,t))},te=n=>{Q||($=void 0,T=void 0,window.removeEventListener("mousemove",ie),window.removeEventListener("mouseup",ie),X&&t.classList.add(E),((e,t)=>{e.dispatchEvent(new CustomEvent("onMouseUp",{detail:{nativeEvent:t}}))})(e,n))},ne=()=>z.findIndex((e=>R===e&&!e.disabled)),ie=e=>{let n;if(H===f){let{height:i,top:r}=t.getBoundingClientRect(),o=-1!==e.type.indexOf("mouse")?e.clientY:e.touches[0].clientY;n=100*Math.min(Math.max(0,o-r),i)/i}else{let{width:i,left:r}=t.getBoundingClientRect(),o=-1!==e.type.indexOf("mouse")?e.clientX:e.touches[0].clientX;n=100*Math.min(Math.max(0,o-r),i)/i}if((G||V)&&(n=100-n),R=((e,n)=>{if(z.length<=0)return;if(1===z.length)return z[0].isClicked(e)&&X&&t.classList.remove(E),z[0];let i=pe(e);if(Z){let e=n,r=me(e);void 0!==r&&(e=w(e,r)),i?($=e,T=0,X&&t.classList.remove(E)):void 0!==$&&(T=e-$,$=e)}if(!de(e)&&!i){for(let n of z)if(n.isClicked(e))return X&&t.classList.remove(E),n;for(let e of z)if(R===e)return e}let r=1/0,o=null;for(let e of z){let t=Math.abs(n-e.percent);t<r&&(r=t,o=e)}return o})(e.target,n),Z&&z.length>1&&void 0!==T){let e=z[0],t=z[z.length-1],n=e.percent+T<0,i=t.percent+T>100;if(n||i)return;for(let e=0;e<z.length;e++)Oe(e,z[e].percent+T);return}let i=ne();-1!==i&&(Oe(i,n),null==R||R.$pointer.focus())},re=t=>{if(Q||document.activeElement!==e||(null==R?void 0:R.disabled))return;t.stopPropagation(),t.preventDefault();let n=t.deltaY<0,i=G||V,r=n?!i:i,o=ne();-1!==o&&(r?ue(o,z[o].percent):ce(o,z[o].percent))},oe=e=>{Q||W||(H===f?Oe(e,V?100:0):G?ce(e,z[e].percent):ue(e,z[e].percent))},ae=e=>{Q||W||(H===f?Oe(e,V?0:100):G?ue(e,z[e].percent):ce(e,z[e].percent))},se=e=>{Q||W||(H===f?V?ce(e,z[e].percent):ue(e,z[e].percent):Oe(e,G?100:0))},le=e=>{Q||W||(H===f?V?ue(e,z[e].percent):ce(e,z[e].percent):Oe(e,G?0:100))},de=e=>e.classList.contains("panel"),pe=e=>e.classList.contains("panel-fill"),ue=(e,t)=>{if(void 0===t)return;let n=me(t);null==n&&(n=1),(t-=n)<0&&(t=0),Oe(e,t)},ce=(e,t)=>{if(void 0===t)return;let n=me(t);null==n&&(n=1),(t+=n)>100&&(t=100),Oe(e,t)},he=()=>{!I||I.update({percents:Se(),values:ke(),$pointers:Ae(),min:Le(),max:Me(),data:De(),step:ye(),round:Ce(),type:Ee(),textMin:ve(),textMax:be(),rightToLeft:_e(),bottomToTop:Fe(),pointersOverlap:Re(),pointersMinDistance:$e(),pointersMaxDistance:Pe(),rangeDragging:Ne(),disabled:Te(),keyboardDisabled:ze()})},ge=()=>{he()},me=e=>{let t;if("function"==typeof c){let n=b(0,100,B,j,e);t=c(n,e)}else t=c;if(y(t)){let e=j-B;return t=0===e?0:100*t/e,t}},fe=e=>{if(void 0===e)return;let t=b(0,100,B,j,e);return void 0!==M?M[Math.round(t)]:((e,t=1/0)=>{if(t===1/0)return e;let i=n(10,t);return Math.round(e*i)/i})(t,q)},ve=()=>void 0!==M?M[B]:B,be=()=>void 0!==M?M[j]:j,ye=()=>c,xe=e=>{var t;return e<=0||U?ve():null!=(t=fe(z[e-1].percent))?t:""},we=e=>{var t;return z.length<=1||e>=z.length-1||U?be():null!=(t=fe(z[e+1].percent))?t:""},Se=()=>z.map((e=>e.percent)),ke=()=>z.map((e=>fe(e.percent))),Ae=()=>z.map((e=>e.$pointer)),Le=()=>B,Me=()=>j,De=()=>M,Ee=()=>H,Ce=()=>q,$e=()=>Y,Pe=()=>J,_e=()=>G,Fe=()=>V,Te=()=>Q,ze=()=>W,Re=()=>U,Ne=()=>Z,Oe=(t,n)=>{if(void 0===n)return;let i=me(n);void 0!==i&&(n=w(n,i));let r=z[t];if(r){r.updatePosition(n,(e=>{if(!(U||z.length<=1||j===B)){if(0===e){let t=100*J/(j-B);return Math.max(0,z[e+1].percent-t)}{let t=100*Y/(j-B);return Math.min(z[e-1].percent+t,100)}}})(t),(e=>{if(!(U||z.length<=1||j===B)){if(e===z.length-1){let t=100*J/(j-B);return Math.min(z[e-1].percent+t,100)}{let t=100*Y/(j-B);return Math.max(0,z[e+1].percent-t)}}})(t),H,G,V),null==N||N.updatePosition(H,z.map((e=>e.percent)),G,V),he();for(let e of z){let t=fe(e.percent);void 0!==t&&(e.setAttr("aria-valuenow",t.toString()),e.setAttr("aria-valuetext",t.toString()))}Be(),((e,t)=>{if(!t||t.length<=0)return;let n=t.map((e=>y(e)?x(e,e):e)),i={values:n||[]};i.value=n[0],i.value0=n[0],i.value1=n[0];for(let e=1;e<n.length;e++)i[`value${e+1}`]=n[e];e.dispatchEvent(new CustomEvent("change",{detail:i}))})(e,z.map((e=>fe(e.percent))))}},Ie=()=>{for(let e=0;e<z.length;e++)Oe(e,z[e].percent)},Be=()=>{var e,t;for(let n=0;n<z.length;n++){let i=z[n];i.setAttr("aria-valuemin",(null!=(e=xe(n))?e:"").toString()),i.setAttr("aria-valuemax",(null!=(t=we(n))?t:"").toString())}},je=e=>{B=x(e,0),B>j&&(j=B+_),Ie()},He=e=>{j=x(e,_),j<B&&(j=B+_),Ie()},qe=e=>{U=!0;for(let t=0;t<e.length;t++)Ge(e[t],t);U=!1;for(let t=0;t<e.length;t++)Ge(e[t],t)},Ge=(e,t)=>{let n;void 0!==M?(n=null==e?0:((e,t)=>t?t.findIndex((t=>t===e||t.toString().trim()===e.toString().trim())):-1)(e,M),-1===n&&(n=0)):(n=x(e,B),n<B&&(n=B),n>j&&(n=j));let i=b(B,j,0,100,n);Oe(t,i)},Ve=e=>{if(null!=e){if("function"==typeof e)return c=e,void Ie();if(y(e)){c=x(e,1);let t=Math.abs(j-B);return c>t&&(c=void 0),void Ie()}c=void 0}else c=void 0},Ue=e=>{U=e,Ie()},Ye=e=>{(!y(e)||e<0)&&(e=0),Y=e},Je=e=>{(!y(e)||e<0)&&(e=1/0),J=e},Ze=e=>{Q=e,t.classList.toggle("disabled",Q),Q?t.setAttribute("aria-disabled","true"):t.hasAttribute("aria-disabled")&&t.removeAttribute("aria-disabled")},Qe=e=>{W=e},We=e=>{null!=e?(M=(e=>{if(null==e)return;if(Array.isArray(e))return e;if(""===e.trim())return;let t=e.split(","),n=[],i=!0;for(let e=0;e<t.length;e++){let r=t[e].trim();""!==r&&(n.push(r),y(r)||(i=!1))}return i?n.map((e=>Number(e))):n})(e),void 0===M||M.length<=0?M=void 0:(je(0),He(M.length-1),void 0===c&&Ve(1))):M=void 0},Xe=t=>{var n;H="string"==typeof t&&t.trim().toLowerCase()===f?f:v;let i=null==(n=e.shadowRoot)?void 0:n.querySelector(".range-slider-box");if(!i)return;i.className=`range-slider-box type-${H}`,Ie();let r=H===f?"vertical":"horizontal";for(let e of z)e.setAttr("aria-orientation",r)},Ke=t=>{G=t,z.length>1&&P(z,G,e),Ie(),he()},et=t=>{V=t,z.length>1&&P(z,V,e),Ie(),he()},tt=e=>{q=x(e,2),q<0&&(q=2),he()},nt=e=>{null==e||"false"===e.toString().trim().toLowerCase()?(X=void 0,t.style.removeProperty(A),t.classList.remove(E)):(X=e.toString(),t.style.setProperty(A,X),t.classList.add(E))},it=(e,t)=>{let n=z[e];!n||(n.setAttr("aria-label",t),K[e]=t)},rt=e=>{if($=void 0,z.length<=1)return Z=!1,void t.classList.remove(C);Z=e,t.classList.toggle(C,Z)};return(()=>{var n,c;for(let e of z)e.setCallbacks(oe,ae,se,le);let v=null==(n=e.shadowRoot)?void 0:n.querySelector(".panel-fill");v&&(N=(e=>({updatePosition:(t,n,i,r)=>{if(n.length<=0)return;let o=1===n.length,a=n[0],s=n[n.length-1];t===f?(e.style.removeProperty("width"),e.style.removeProperty("right"),e.style.removeProperty("left"),e.style.height=o?`${a}%`:`${Math.abs(a-s)}%`,r?(e.style.bottom="0%",e.style.top=o?"auto":`${Math.min(100-s,100-a)}%`):(e.style.bottom="auto",e.style.top=o?"0%":`${Math.min(a,s)}%`)):(e.style.removeProperty("height"),e.style.removeProperty("top"),e.style.removeProperty("bottom"),e.style.width=o?`${a}%`:`${Math.abs(a-s)}%`,i?(e.style.right="0%",e.style.left=o?"auto":`${Math.min(100-s,100-a)}%`):(e.style.right="auto",e.style.left=o?"0%":`${Math.min(a,s)}%`))}}))(v)),Xe(e.getAttribute(u)),Ke(S(e.getAttribute("rtl"))),et(S(e.getAttribute("btt"))),((e,t)=>{B=void 0!==M?0:x(e,0),j=void 0!==M?M.length-1:x(t,_),je(B),He(j)})(e.getAttribute("min"),e.getAttribute("max")),Ve(e.getAttribute(d)),We(e.getAttribute(l)),qe(i.map((e=>e[1]))),Ue(S(e.getAttribute(r))),Ye(x(e.getAttribute(o),0)),Je(x(e.getAttribute(a),1/0)),rt(S(e.getAttribute(s))),tt(x(e.getAttribute(p),2)),(()=>{Ze(S(e.getAttribute(h))),W=S(e.getAttribute(g));let t=L(e,/^pointer([0-9]*)-disabled$/,(e=>S(e)));for(let e of t){let t=e[0];!z[t]||(z[t].disabled=e[1])}})(),(()=>{let t=L(e,/^aria-label([0-9]*)$/);for(let e of t){let t=e[0];it(t,e[1])}})(),O=D(e,t,z),nt(null!=(c=e.getAttribute(m))?c:F),t.addEventListener("mousedown",ee),t.addEventListener("mouseup",te),t.addEventListener("touchmove",ie),t.addEventListener("touchstart",ie),document.addEventListener("wheel",re,{passive:!1}),I=((e,t,n,i)=>{let r=[],o=t=>{if(t.gettersAndSetters)for(let n of t.gettersAndSetters)if(n.name&&n.attributes)try{Object.prototype.hasOwnProperty.call(e,n.name)||Object.defineProperty(e,n.name,n.attributes)}catch(e){console.error("defineSettersGetters error:",e)}},a=t=>{var n;if(!t.css)return;let i=null==(n=e.shadowRoot)?void 0:n.querySelector("style");!i||(i.innerHTML+=t.css)};return{init:()=>{if(window.tcRangeSliderPlugins)for(let s of window.tcRangeSliderPlugins){let l=s();r.push(l),l.init&&"function"==typeof l.init&&(l.init(e,t,n,i),o(l),a(l))}},update:e=>{for(let t of r)t.update&&"function"==typeof t.update&&t.update(e)},onAttrChange:(e,t)=>{for(let n of r)n.onAttrChange&&"function"==typeof n.onAttrChange&&n.onAttrChange(e,t)},destroy:()=>{for(let e of r)e.destroy&&"function"==typeof e.destroy&&e.destroy()}}})(e,ge,{setValues:qe,setMin:je,setMax:He,setStep:Ve,setPointersOverlap:Ue,setPointersMinDistance:Ye,setPointersMaxDistance:Je,setDisabled:Ze,setType:Xe,setRightToLeft:Ke,setBottomToTop:et,setRound:tt,setKeyboardDisabled:Qe,setRangeDragging:rt,setData:We},{getPercents:Se,getValues:ke,getPointerElements:Ae,getMin:Le,getMax:Me,getStep:ye,getData:De,getType:Ee,getRound:Ce,getTextMin:ve,getTextMax:be,isRightToLeft:_e,isBottomToTop:Fe,isDisabled:Te,isKeyboardDisabled:ze,isPointersOverlap:Re,isRangeDraggingEnabled:Ne,getPointersMinDistance:$e,getPointersMaxDistance:Pe}),I.init()})(),{get pointers(){return z},get styles(){return O},get pluginsManager(){return I},get min(){return ve()},get max(){return be()},get step(){return ye()},get pointersOverlap(){return Re()},set pointersOverlap(e){Ue(e)},get pointersMinDistance(){return $e()},set pointersMinDistance(e){Ye(e)},get pointersMaxDistance(){return Pe()},set pointersMaxDistance(e){Je(e)},get disabled(){return Te()},set disabled(e){Ze(e)},get data(){return De()},get type(){return Ee()},set type(e){Xe(e)},get rightToLeft(){return _e()},set rightToLeft(e){Ke(e)},get bottomToTop(){return Fe()},set bottomToTop(e){et(e)},get round(){return Ce()},set round(e){tt(e)},get animateOnClick(){return X},set animateOnClick(e){nt(e)},get keyboardDisabled(){return ze()},set keyboardDisabled(e){Qe(e)},get rangeDragging(){return Ne()},set rangeDragging(e){rt(e)},setMin:je,setMax:He,setValue:Ge,setStep:Ve,setData:We,getTextValue:fe,setAriaLabel:it,getAriaLabel:e=>K[e],addPointer:t=>{let n=z.length,i=z[n-1].$pointer,r=i.cloneNode(!0);i.after(r);let o=k(e,r,n);return o.setCallbacks(oe,ae,se,le),z.push(o),Ge(t,n),Ie(),he(),n},removePointer:()=>{let e=z.length,t=z[e-1];return t?(t.destroy(),z.pop(),z.length<=1&&rt(!1),Ie(),he(),e-1):-1},destroy:()=>{t.removeEventListener("mousedown",ee),t.removeEventListener("mouseup",te),t.removeEventListener("touchmove",ie),t.removeEventListener("touchstart",ie),document.removeEventListener("wheel",re);for(let e of z)e.destroy();null==I||I.destroy()}}},z=class extends HTMLElement{constructor(){super(),i(this,"slider"),i(this,"_externalCSSList",[]),i(this,"_observer",null),this.attachShadow({mode:"open"})}set step(e){this.slider&&this.slider.setStep(e)}get step(){var e;return null==(e=this.slider)?void 0:e.step}set disabled(e){this.slider&&(this.slider.disabled=e)}get disabled(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.disabled)&&t}set data(e){var t;null==(t=this.slider)||t.setData(e)}get data(){var e;return null==(e=this.slider)?void 0:e.data}set min(e){var t;null==(t=this.slider)||t.setMin(e)}get min(){var e;return null==(e=this.slider)?void 0:e.min}set max(e){var t;null==(t=this.slider)||t.setMax(e)}get max(){var e;return null==(e=this.slider)?void 0:e.max}set round(e){!this.slider||(this.slider.round=e)}get round(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.round)?t:2}set type(e){!this.slider||(this.slider.type=null!=e?e:v)}get type(){var e;return(null==(e=this.slider)?void 0:e.type)||v}set pointersOverlap(e){!this.slider||(this.slider.pointersOverlap=e)}get pointersOverlap(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.pointersOverlap)&&t}set pointersMinDistance(e){!this.slider||(this.slider.pointersMinDistance=e)}get pointersMinDistance(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.pointersMinDistance)?t:0}set pointersMaxDistance(e){!this.slider||(this.slider.pointersMaxDistance=e)}get pointersMaxDistance(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.pointersMaxDistance)?t:1/0}set theme(e){!this.slider||!this.slider.styles||(this.slider.styles.theme=e)}get theme(){var e,t,n;return null!=(n=null==(t=null==(e=this.slider)?void 0:e.styles)?void 0:t.theme)?n:null}set rtl(e){!this.slider||(this.slider.rightToLeft=e)}get rtl(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.rightToLeft)&&t}set btt(e){!this.slider||(this.slider.bottomToTop=e)}get btt(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.bottomToTop)&&t}set keyboardDisabled(e){!this.slider||(this.slider.keyboardDisabled=e)}get keyboardDisabled(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.keyboardDisabled)&&t}set animateOnClick(e){!this.slider||(this.slider.animateOnClick=e)}get animateOnClick(){var e;return null==(e=this.slider)?void 0:e.animateOnClick}get rangeDragging(){var e,t;return null!=(t=null==(e=this.slider)?void 0:e.rangeDragging)&&t}set rangeDragging(e){this.slider&&(this.slider.rangeDragging=S(e))}get externalCSSList(){return this._externalCSSList}addPointer(e){var t;if(!this.slider)return;let n=null==(t=this.slider)?void 0:t.addPointer(e);$(this,this.slider,n,`value${n+1}`,`ariaLabel${n+1}`,`pointerShape${n+1}`,`pointer${n+1}Disabled`)}removePointer(){var e;!this.slider||null==(e=this.slider)||e.removePointer()}addCSS(e){if(!this.shadowRoot)return;let t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}connectedCallback(){var e,t,n,i;if(!this.shadowRoot)return;this._externalCSSList=(e=>{if(!e)return null;let t=e.getAttribute("css-links");if(!t)return null;let n=t.split(";"),i=[];for(let e of n)""!==e.trim()&&i.push(e.trim());return i})(this),this.shadowRoot.innerHTML=(n=":host{--width:300px;--height:.25rem;--opacity:.4;--panel-bg:#cbd5e1;--panel-bg-hover:#94a3b8;--panel-bg-fill:#475569;--panel-bg-border-radius:1rem;--pointer-width:1rem;--pointer-height:1rem;--pointer-bg:#fff;--pointer-bg-hover:#dcdcdc;--pointer-bg-focus:#dcdcdc;--pointer-shadow:0 0 2px rgba(0,0,0,0.8);--pointer-shadow-hover:0 0 2px #000;--pointer-shadow-focus:var(--pointer-shadow-hover);--pointer-border:1px solid hsla(0,0%,88%,0.5);--pointer-border-hover:1px solid #94a3b8;--pointer-border-focus:var(--pointer-border-hover);--pointer-border-radius:100%;--animate-onclick:.3s}:host{max-width:100%}.range-slider-box{display:flex;position:relative;flex-direction:column}.range-slider{position:relative;width:var(--width,100%);height:var(--height,0.25rem);touch-action:none;max-width:100%;box-sizing:border-box;cursor:pointer}.row{width:100%;display:flex;align-items:center}.range-slider.disabled{opacity:var(--opacity,0.4);cursor:default}.pointer.disabled{-webkit-filter:brightness(0.8);filter:brightness(0.8);cursor:default}.range-slider *{box-sizing:border-box}.container{position:absolute;width:100%;height:100%}.panel{position:absolute;z-index:10;width:100%;height:100%;background:var(--panel-bg,#2d4373);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;transition:.3s all ease}.panel-fill{background:var(--panel-bg-fill,#000);border-radius:var(--panel-bg-border-radius,1rem);overflow:hidden;height:100%;position:absolute;z-index:10}.panel:hover{background:var(--panel-bg-hover,#5f79b7)}.disabled .panel:hover{background:var(--panel-bg,#5f79b7)}.pointer{position:absolute;z-index:20;outline:0;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;box-shadow:var(--pointer-shadow);border:var(--pointer-border);border-radius:var(--pointer-border-radius,100%);-webkit-transform:translateX(-50%);transform:translateX(-50%);width:var(--pointer-width,15px);height:var(--pointer-height,15px);transition:.3s all ease}.pointer-shape:hover{background:var(--pointer-bg-hover,#fff);background-size:contain;border:var(--pointer-border-hover);box-shadow:var(--pointer-shadow-hover)}.disabled .pointer-shape:hover{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.pointer:focus .pointer-shape{background:var(--pointer-bg-focus,#fff);background-size:contain;border:var(--pointer-border-focus);box-shadow:var(--pointer-shadow-focus)}.disabled .pointer:focus .pointer-shape{background:var(--pointer-bg,#fff);background-size:contain;border:var(--pointer-border);box-shadow:var(--pointer-shadow)}.type-vertical .range-slider{--width:.25rem;--height:300px;max-height:100%}.type-vertical .range-slider .pointer{left:50%}.type-vertical .range-slider .panel-fill{width:100%}.type-vertical.range-slider-box{flex-direction:row}.type-vertical .row{flex-direction:column}.animate-on-click .pointer,.animate-on-click .panel-fill{transition:all var(--animate-onclick)}.range-dragging .panel-fill{cursor:move}",` ${(i=this._externalCSSList)&&i.length>0?i.map((e=>`<link rel="stylesheet" href="${e}" />`)).join(""):""} <style> ${n} </style> <div class="range-slider-box"> <div class="row"> <div id="range-slider" class="range-slider"> <div class="container"> <div class="panel"></div> <div class="panel-fill"></div> <div class="container"> <div class="pointer" tabindex="0" role="slider"> <div class="pointer-shape"></div> </div> </div> </div> </div> </div> </div>`);let f=null==(e=this.shadowRoot)?void 0:e.querySelector(".pointer");if(!f)return;let v=null==(t=this.shadowRoot)?void 0:t.getElementById("range-slider");if(!v)return;let b=((e,t)=>{let n=new Map,i=/^value([0-9]*)$/;for(let t of e.attributes){let e=t.nodeName.trim().toLowerCase();if(!i.test(e))continue;let r=e.replace("value","").trim(),o=""===r||"0"===r||"1"===r?0:x(r,0)-1,a=y(t.value)?x(t.value,0):t.value;n.set(o,a)}let r=Math.max(...Array.from(n.keys())),o=[];o.push([k(e,t,0),n.get(0)]);let a=t;for(let i=1;i<=r;i++){let r=t.cloneNode(!0);a.after(r),a=r,o.push([k(e,r,i),n.get(i)])}return o})(this,f);this.slider=T(this,v,b),((e,t)=>{let n=[["value","ariaLabel","pointerShape","pointerDisabled",0],["value0","ariaLabel0","pointerShape0","pointer0Disabled",0],["value1","ariaLabel1","pointerShape1","pointer1Disabled",0]];for(let e=2;e<10;e++)n.push([`value${e}`,`ariaLabel${e}`,`pointer${e}Shape`,`pointer${e}Disabled`,e-1]);for(let i of n)$(e,t,i[4],i[0],i[1],i[2],i[3])})(this,this.slider),this._observer=new MutationObserver((e=>{e.forEach((e=>{var t;if(!this.slider||"attributes"!==e.type)return;let n=e.attributeName;!n||((e,t,n)=>{let i=M.find((([e,n,i,r])=>n.replace("#","")===t.replace(/\d+/g,"")));if(i&&e.styles){let[r,o,a,s]=i,l=t.replace(/\D/g,"").trim(),d=""===l||"0"===l||"1"===l?0:x(l,0)-1;return void e.styles.setStyle(r,n,d)}switch(e&&e.pluginsManager&&e.pluginsManager.onAttrChange(t,n),t){case"min":e.setMin(n);break;case"max":e.setMax(n);break;case d:e.setStep(n);break;case r:e.pointersOverlap=S(n);break;case o:e.pointersMinDistance=x(n,0);break;case s:e.rangeDragging=S(n);break;case a:e.pointersMaxDistance=x(n,1/0);break;case h:e.disabled=S(n);break;case g:e.keyboardDisabled=S(n);break;case l:e.setData(n);break;case u:e.type=n;break;case"rtl":e.rightToLeft=S(n);break;case"btt":e.bottomToTop=S(n);break;case p:e.round=x(n,2);break;case c:e.styles&&(e.styles.theme=n);break;case m:e.animateOnClick=n}let f=null;if(/^value([0-9]*)$/.test(t)&&(f="value"),/^pointer([0-9]*)-disabled$/.test(t)&&(f="pointer-disabled"),/^aria-label([0-9]*)$/.test(t)&&(f="aria-label"),/^pointer([0-9]*)-shape$/.test(t)&&(f="pointer-shape"),!f)return;let v=t.replace(/\D/g,"").trim(),b=""===v||"0"===v||"1"===v?0:x(v,0)-1;switch(f){case"value":e.setValue(n,b);break;case"pointer-disabled":{let t=null==e?void 0:e.pointers[b];if(!t)return;t.disabled=S(n);break}case"aria-label":e.setAriaLabel(b,n);break;case"pointer-shape":e.styles&&e.styles.setPointerShape(b,n)}})(this.slider,n,null!=(t=this.getAttribute(n))?t:"")}))})),this._observer.observe(this,{attributes:!0})}disconnectedCallback(){this._observer&&this._observer.disconnect(),this.slider&&this.slider.destroy()}},window.tcRangeSlider=z,customElements.get("toolcool-range-slider")||customElements.define("toolcool-range-slider",z),customElements.get("tc-range-slider")||customElements.define("tc-range-slider",class extends z{}),CindyJS;class q{minDegree;maxDegree;nodeGenerator;constructor(e=q.nodeGeneratorEquidistant(),t=Number.POSITIVE_INFINITY,n=0){this.nodeGenerator=e,this.minDegree=Math.max(0,n),this.maxDegree=Math.max(this.minDegree,t)}getMinDegree(){return this.minDegree}getMaxDegree(){return this.maxDegree}generateNodes(e){const t=Math.max(this.minDegree,Math.min(e,this.maxDegree)),n=this.nodeGenerator(t).map((e=>Math.max(0,Math.min(e,1))));for(n.length=Math.min(n.length);n.length<t+1;)n.push(1);return n}static nodeGeneratorEquidistant(){return j}static nodeGeneratorChebyshev(){return H}}class G{lights;constructor(e=[{direction:[0,0,-1],color:[.3,.5,1],gamma:1,cameraSpace:!0},{direction:[0,0,-1],color:[.5,1,1],gamma:10,cameraSpace:!0},{direction:[0,0,1],color:[1,.2,.1],gamma:1,cameraSpace:!0},{direction:[0,0,1],color:[1,1,.5],gamma:10,cameraSpace:!0},{direction:[-10,10,-2],color:[.63,.72,.27],gamma:5,cameraSpace:!1},{direction:[10,-8,3],color:[.54,.09,.54],gamma:5,cameraSpace:!1}]){this.lights=e}getLights(){return this.lights}}const V=`${B('//initialize some variables\nmat = [\n    [0.3513, -0.4908, -0.7973],\n    [-0.8171, -0.5765, -0.0051],\n    [-0.4571, 0.6533, -0.6036]\n];\nsx = mouse().x;\nsy = mouse().y;\ndragging = false;\nN = 5; // degree of the surface; will be overwritten\nli = []; // nodes for interpolation; will be overwritten\nzoom = 2.2;\na = 0.3;\nalpha = .7;\naspectRatio = 1.0;\nhasTwoSides = true;\n\n//we stand at position mat*(0, 0, -2.2) and watch to (0,0,0).\n//ray(pixel, t) is the point in R^3 that lies at position t the ray behind the pixel at location pixel(vec2)\n//t=0 is corresponds to points within the interesting area near (0,0,0)\nray(pixel, t) := mat * ((t+2.2) * (pixel.x, pixel.y, 1) + (0, 0, -2.2));\n\n//sphere with radius 1 for clipping\nS(r) := (r * r - 1);\n\n//fun is the user defined trivariate polynomial\nfun(x, y, z) := x^2 + 1;\n\n//F takes vec3 instead of 3 variables\nF(p) := (p=p/zoom;fun(p.x, p.y, p.z));\n    \n//casteljau algorithm to evaluate and subdivide polynomials in Bernstein form.\n//poly is a vector containing the coefficients, i.e. p(x) = sum(0..N, i, poly_(i+1) * b_(i,N)(x)) where b_(i,N)(x) = choose(N, i)*x^i*(1-x)^(N-1)\ncasteljau(poly, x) := (\n  regional(alpha, beta);\n  alpha = 1-x;\n  beta = x;\n  forall(0..N, k,\n    repeat(N-k,\n      poly_# = alpha*poly_# + beta*poly_(#+1);\n    );\n  );\n  poly //the bernstein-coefficients of the polynomial in the interval [x,1]\n);\n\n//evaluates a polynomial, represented as vector of coefficients in bernstein-form\neval(poly, x) := casteljau(poly, x)_1;\n\nInfinity = 1e100000;\n\n//this function has to be called whenever fun changes\ninit() := (\n  dx = .05; dy =.02;\n  diff(fun(x,y,z), x, dxF(x,y,z) := #);\n  diff(fun(x,y,z), y, dyF(x,y,z) := #);\n  diff(fun(x,y,z), z, dzF(x,y,z) := #);\n\n    N = degree(fun(x,y,z), x, y, z);\n    if(N == -1, N=Infinity);\n    print("Surface degree: " + text(N));\n    newLi = getInterpolationNodes(N);\n    N = length(newLi) - 1;\n    print("Degree of interpolating polynomial: " + text(N));\n    print("Interpolation nodes: " + text(newLi));\n\n    if(newLi != li,\n      li = newLi;\n      //A is the matrix of the linear map that evaluates a polynomial in bernstein-form at the interpolation nodes\n      A = apply(li, node,\n        //the i-th column contains the values of the (i,N) bernstein polynomial evaluated at the interpolation nodes\n        apply(0..N, i, eval(\n          apply(0..N, if(#==i,1,0)), // e_i = [0,0,0,1,0,0]\n          node //evaluate  b_(i,N)(node)\n        )) \n      );\n      \n      B = (inverse(A)); //B interpolates polynomials (in Bernstein basis), given the values [p(li_1), p(li_2), ...]\n    )\n);\n\n//B3 is a matrix that interpolates quadratic polynomials (in monomial basis), given the values [p(-2), p(0), p(2)]\nB3 = inverse(apply([-2, 0, 2], c, apply(0 .. 2, i, c ^ i))); \n\n//use symbolic differentation function\ndF(p) := (p=p/zoom; (\n    dxF(p.x,p.y,p.z),\n    dyF(p.x,p.y,p.z),\n    dzF(p.x,p.y,p.z)\n));\n\n//update the color color for the pixel at position pixel assuming that the surface has been intersected at ray(pixel, dst)\n//because of the alpha-transparency updatecolor should be called for the intersections with large dst first\n// color is a float[4] representing RGBA with premultiplied alpha\nupdatecolor(pixel, dst, color) := (\n  regional(x, normal, dr);\n  x = ray(pixel, dst); //the intersection point in R^3\n  color = (1 - alpha) * color;\n        \n  normal = dF(x);\n  normal = normal / |normal|;\n\n  if(hasTwoSides == false,\n    dr = ray(pixel,1)-ray(pixel,0);\n    if(normal*dr>0, normal=-normal);\n  );\n\n  colorHit = (0., 0., 0.);\n  forall(1..length(lightdirs),\n    //illuminate if the normal and lightdir point in the same direction\n    illumination = max(0, (lightdirs_# / abs(lightdirs_#)) * normal);\n    colorHit = colorHit + alpha * (illumination ^ gamma_#) * colors_#;\n  );\n  color = color + (colorHit_1, colorHit_2, colorHit_3, alpha);\n);\n\n\nnsign(pixel, a, b) := ( //Descartes rule of sign for the interval (a,b)\n  //obtain the coefficients in bernstein basis of F along the ray in interval (a,b) by interpolation within this interval\n  poly = B * apply(li,\n    F(ray(pixel, a+#*(b-a))) //evaluate F(ray(pixel, ·)) along Chebyshev nodes for (a,b)\n  );\n  //count the number of sign changes\n  ans = 0;\n  //last = poly_1;\n  forall(2..(N+1), k,\n    //if(last == 0, last = poly_k;); this (almost) never happens\n    if(min(poly_(k-1), poly_k) <= 0 & 0 <= max(poly_(k-1), poly_k), //sign switch; avoid products due numerics\n      ans = ans + 1;\n    );\n  );\n  ans //return value   \n);\n\n\n//bisect F(ray(pixel, ·)) in [x0, x1] assuming that F(ray(pixel, x0)) and F(ray(pixel, x1)) have opposite signs\nbisectf(pixel, x0, x1) := (\n    regional(v0, v1, m, vm);\n    v0 = F(ray(pixel, x0));\n    v1 = F(ray(pixel, x1));\n    repeat(11,\n        m = (x0 + x1) / 2; vm = F(ray(pixel, m));\n        if (min(v0,vm) <= 0 & 0 <= max(v0, vm), //sgn(v0)!=sgn(vm); avoid products due numerics\n            (x1 = m; v1 = vm;),\n            (x0 = m; v0 = vm;)\n        );\n    );\n    m //return value   \n);\n\n//id encodes a node in a binary tree using heap-indices\n//1 is root node and node v has children 2*v and 2*v+1\n//computes s=2^depth of a node id: Compute floor(log_2(id));\n//purpose: id corresponds interval [id-s,id+1-s]/s\ngets(id) := (\n  s = 1;\n  repeat(15,\n    if(2*s<=id,\n      s = 2*s;\n    )\n  );\n  s //return value\n);\n\n//determines the next node in the binary tree that would be visited by a regular in DFS\n//if the children of id are not supposed to be visited\n//In interval logic: finds the biggest unvisited interval directly right of the interval of id.\nnext(id) := (\n  id = id+1;\n  //now: remove zeros from right (in binary representation) while(id&1) id=id>>1;\n  repeat(15,\n    if(mod(id,2)==0, \n      id = floor(id/2);\n    )\n  );\n  if(id==1, 0, id) //return value - id 0 means we stop our DFS\n);\n\n//what color should be given to pixel with pixel-coordinate pixel (vec2)\n// color is a float[4] representing RGBA with premultiplied alpha\ncomputeColor(pixel, l, u, color) := (\n  regional(a, b);\n  //traverse binary tree (DFS) using heap-indices\n  //1 is root node and node v has children 2*v and 2*v+1\n  id = 1; \n  //maximum number of steps\n  repeat(min(N*8,80),\n    //id=0 means we are done; do only a DFS-step if we are not finished yet\n    if(id>0,\n      s = gets(id); //s = floor(log_2(id))\n      \n      //the intervals [a,b] are chossen such that (id in binary notation)\n      //id = 1   => [a,b]=[l,u]\n      //id = 10  => [a,b]=[l,(u+l)/2]\n      //id = 101 => [a,b]=[l,(u+3*l)/4]\n      //id = 11  => [a,b]=[(u+l)/2,u]\n      //...\n      if(findAllRoots,(\n        // back to front\n        a = u - (u-l)*((id+1)/s-1);\n        b = u - (u-l)*((id+0)/s-1);\n      ),(\n        // front to back\n        a = l + (u-l)*((id+0)/s-1);\n        b = l + (u-l)*((id+1)/s-1);\n      ));\n\n      //how many sign changes has F(ray(pixel, ·)) in (a,b)?\n      cnt = nsign(pixel, a, b);\n      if(cnt == 1, // in this case we found a root (or it is likely to have a multiple root)\n        //=>colorize and break DFS\n        color = updatecolor(pixel, bisectf(pixel, a, b), color);\n        if(findAllRoots,\n          id = next(id), // break DFS\n          id = 0 // stop searching\n        ),\n      if(cnt == 0, //there is no root\n        id = next(id), //break DFS\n        \n        //otherwise cnt>=2: there are cnt - 2*k roots.\n        id = 2*id;  //visit first child within DFS\n      )\n  );  \n  ));\n  color\n);\n')}; csInitDone();`,U=new Map;CindyJS.registerPlugin(1,"surfer-js-core-gpu",(e=>{const t=e.instance,n=U.get(t);if(void 0===n)throw new Error("Unknown CindyJS instance.");const{onInit:i}=n;e.defineFunction("csInitDone",0,(()=>i(e)))}));class Y{api;cdy;element;canvas;intersectionAlgorithm;illumnimationModel;expression="x^2 - 1";twoSided=!0;alpha=1;zoom=1;parameters={};static IntersectionAlgorithms={PolynomialInterpolation:q};static IlluminationModels={Montag:G};constructor(e,t,n){this.api=e,this.cdy=e.instance,this.element=t,this.canvas=n;const i=q.nodeGeneratorChebyshev();this.intersectionAlgorithm=new q(i,7),this.illumnimationModel=new G,this.defineCindyScriptFunctions(),this.setIntersectionAlgorithm(this.intersectionAlgorithm),this.setIlluminationModel(this.illumnimationModel),this.setExpression(this.expression),this.setTwoSided(this.twoSided),this.setAlpha(this.alpha),this.setZoom(this.zoom),Object.entries(this.parameters).forEach((([e,t])=>this.setParameter(e,t)))}defineCindyScriptFunctions(){const e=e=>({ctype:"list",value:e.map((e=>({ctype:"number",value:{real:e,imag:0}})))}),t=t=>({ctype:"list",value:t.map((t=>e(t)))});(()=>{this.api.defineFunction("getInterpolationNodes",1,(t=>{const n=this.api.evaluateAndVal(t[0]).value.real,i=this.getIntersectionAlgorithm().generateNodes(n);return e(i)}))})(),(()=>{this.api.defineFunction("getCameraSpaceLightDirections",0,(()=>t(this.getIlluminationModel().getLights().filter((({cameraSpace:e})=>e)).map((({direction:e})=>e))))),this.api.defineFunction("getSurfaceSpaceLightDirections",0,(()=>t(this.getIlluminationModel().getLights().filter((({cameraSpace:e})=>!e)).map((({direction:e})=>e))))),this.api.defineFunction("getLightColors",0,(()=>t(this.getIlluminationModel().getLights().map((({color:e})=>e))))),this.api.defineFunction("getLightGammas",0,(()=>e(this.getIlluminationModel().getLights().map((({gamma:e})=>e)))))})()}getIntersectionAlgorithm(){return this.intersectionAlgorithm}getIlluminationModel(){return this.illumnimationModel}getExpression(){return this.expression}getTwoSided(){return this.twoSided}getAlpha(){return this.alpha}getZoom(){return this.zoom}getParameter(e){return this.parameters[e]}getParameters(){return{...this.parameters}}getParameterNames(){return Object.keys(this.parameters)}setExpression(e){return this.expression=e,this.cdy.evokeCS(`fun(x,y,z) := (${e}); init();`),this}setTwoSided(e){return this.twoSided=e,this.cdy.evokeCS(`hasTwoSides = (${e?"true":"false"});`),this}setAlpha(e){return this.alpha=e,this.cdy.evokeCS(`alpha = (${e});`),this}setZoom(e){return this.zoom=e,this.cdy.evokeCS(`zoom = (${e});`),this}setParameter(e,t){return this.parameters[e]=t,this.cdy.evokeCS(`${e} = (${t});`),this}setIntersectionAlgorithm(e){this.intersectionAlgorithm=e,this.cdy.evokeCS("init();")}setIlluminationModel(e){this.illumnimationModel=e,this.cdy.evokeCS("init();")}static async create(e,t=256,n=256){const i=e.ownerDocument.createElement("canvas");i.width=t,i.height=n,e.appendChild(i);const r=CindyJS.newInstance({scripts:{init:V,draw:B("gsave();\nif(aspectRatio > 1.0,scale(1.0/aspectRatio));\n\n//the following is executed for every rendered frame\nif (dragging,\n    dx = 3 * (sx - mouse().x); dy = 3 * (sy - mouse().y);,\n    dx = .9*dx; dy = .9*dy;\n);\n\nsx = mouse().x;\nsy = mouse().y;\n\n//the rotation matrix: It is modified either if the user is dragging or time passes\nmat = mat * (\n    (1, 0, 0),\n    (0, cos(dy), -sin(dy)),\n    (0, sin(dy), cos(dy))\n) * (\n    (cos(dx), 0, -sin(dx)),\n    (0, 1, 0),\n    (sin(dx), 0, cos(dx))\n);\n\n\n//configuration for the lights in the scene. A light has a position, a gamma-parameter for its shininess and a color\nlightdirs = apply(getCameraSpaceLightDirections(),mat * #) ++ getSurfaceSpaceLightDirections();\ngamma = getLightGammas();\ncolors = getLightColors();\n\n\n// translucent surface: find all roots from back to front\n// opaque surface: stop after first root has been found\nfindAllRoots = alpha < .99;\n\n\ncolorplot(\n  spolyvalues = apply([-2, 0, 2], v, S(ray(#, v))); //evaluate S along ray\n  spoly = B3 * spolyvalues;                         //interpolate to monomial basis\n  D = (spoly_2 * spoly_2) - 4. * spoly_3 * spoly_1; //discriminant of spoly\n  \n  color = (0., 0., 0., 0.); // background color: fully transparent\n  if (D >= 0, //ray intersects ball\n    color = computeColor(\n      #, \n      (-spoly_2 - re(sqrt(D))) / (2 * spoly_3), //intersection entering the ball\n      (-spoly_2 + re(sqrt(D))) / (2 * spoly_3), //intersection leaving the ball\n      color\n    );              \n  );\n  color //return value: WebGL uses premultiplied alpha by default for RGBA which is already our internal representation!!!\n); //render the scene. # is the pixel coordinate\n\ngrestore();\n\n// loop animation if there is motion (and we are not dragging), otherwise stop\nif(dragging % |(dx,dy)|>.0001, playanimation(), pauseanimation());\n"),mousedown:B("sx = mouse().x;\nsy = mouse().y;\ndragging = sx < .5;\n"),mouseup:B("dragging = false;\n")},animation:{autoplay:!1},use:["CindyGL","symbolic","surfer-js-core-gpu"],ports:[{element:i,transform:[{visibleRect:[-.51,-.51,.51,.51]}]}]});return new Promise((e=>{U.set(r,{onInit:t=>{const n=i.parentElement;if(null===n)throw new Error("Something went wrong during startup of Cinderella applet");new ResizeObserver((()=>{const e=i.width/i.height;r.evokeCS(`aspectRatio = ${e};`)})).observe(i);const o=new Y(t,n,i);e(o)}}),r.startup()}))}}var J,Z=Y;J=new URL(I("27Lyk").resolve("lpQ5Q"),import.meta.url).toString();const Q=new URL(J);const W=[{direction:[0,0,-1],color:[231/255,49/255,77/255],gamma:1,cameraSpace:!0},{direction:[0,0,-1],color:[243/255,179/255,41/255],gamma:10,cameraSpace:!0},{direction:[0,0,1],color:[46/255,127/255,186/255],gamma:1,cameraSpace:!0},{direction:[0,0,1],color:[98/255,177/255,114/255],gamma:10,cameraSpace:!0},{direction:[-10,10,-2],color:[.63,.72,.27],gamma:5,cameraSpace:!1},{direction:[10,-8,3],color:[.54,.09,.54],gamma:5,cameraSpace:!1}];(async function(){const e=document.getElementById("formula-form"),t=document.getElementById("formula"),n=document.getElementById("go"),{paramASlider:i,opacitySlider:r,zoomSlider:o}=function(){const e=document.getElementById("sliders"),t={generateLabels:"false","animate-onclick":"false","css-links":Q.href,theme:"surfer","slider-width":"256px","slider-height":"0.7rem"},n=document.createElement("tc-range-slider");n.setAttribute("min","0.4"),n.setAttribute("max","1.2"),n.setAttribute("step","0.0001"),n.setAttribute("value","1.0");const i=document.createElement("tc-range-slider");i.setAttribute("min","0.3"),i.setAttribute("max","1"),i.setAttribute("step","0.0001"),i.setAttribute("value","0.75");const r=document.createElement("tc-range-slider");r.setAttribute("min","-3"),r.setAttribute("max","0.5"),r.setAttribute("step","0.0001"),r.setAttribute("value","-1");const o=[n,i,r],a=Object.entries(t);return o.forEach((t=>{a.forEach((([e,n])=>t.setAttribute(e,n))),e.append(t)})),{paramASlider:n,opacitySlider:i,zoomSlider:r}}(),a=new Z.IlluminationModels.Montag(W),s=document.getElementById("surfer-container"),l=await Z.create(s,512,512);l.setExpression(t.value),l.setParameter("a",i.value),l.setZoom(Math.pow(2,o.value)),l.setAlpha(r.value),l.element.classList.add("surface"),l.setIlluminationModel(a),i.addEventListener("change",(e=>{l.setParameter("a",e.detail.value)})),r.addEventListener("change",(e=>{l.setAlpha(e.detail.value)})),o.addEventListener("change",(e=>{l.setZoom(Math.pow(2,e.detail.value))}));const d=()=>l.setExpression(t.value);e.addEventListener("submit",d),n.addEventListener("click",d),t.addEventListener("keydown",(e=>"Enter"===e.code?d():void 0)),window.addEventListener("message",(e=>l.setExpression(e.data)))})().then();
//# sourceMappingURL=index.988fbcfc.js.map
