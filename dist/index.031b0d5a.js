(function(){"use strict";CindyJS.registerPlugin(1,"symbolic",(function(r){function n(r){if(null==r||"object"!=typeof r)return r;if(r instanceof Array){for(var e=[],t=0,u=r.length;t<u;t++)e[t]=n(r[t]);return e}if(r instanceof Object){for(t in e={},r)r.hasOwnProperty(t)&&0<="oper impl args ctype stack name arglist value real imag key obj body".split(" ").indexOf(t)&&(e[t]=n(r[t]));return r.modifs&&(e.modifs=r.modifs),e}}var e=function(r){return{ctype:"number",value:{real:r,imag:0}}},t=function(r,n){return{ctype:"function",oper:r,args:n,modifs:{}}},u={sin$1:function(r){return[t("cos$1",[r[0]])]},cos$1:function(r){return[t("sub$2",[e(0),t("sin$1",[r[0]])])]},exp$1:function(r){return[t("exp$1",[r[0]])]},log$1:function(r){return[t("div$2",[e(1),r[0]])]},sqrt$1:function(r){return[t("div$2",[e(.5),t("sqrt$1",[r[0]])])]},add$2:function(r){return[e(1),e(1)]},sub$2:function(r){return[e(1),e(-1)]},mult$2:function(r){return[r[1],r[0]]},div$2:function(r){return[t("div$2",[e(1),r[1]]),t("div$2",[t("sub$2",[e(0),r[0]]),t("mult$2",[r[1],r[1]])])]},pow$2:function(r){return[t("mult$2",[r[1],t("pow$2",[r[0],t("sub$2",[r[1],e(1)])])]),t("mult$2",[t("log$1",[r[0]]),t("pow$2",[r[0],r[1]])])]},";":function(r){return"void"==r[1].ctype?[e(1),e(0)]:[e(0),e(1)]}},i={sin$1:function(r,n){return 1/0},cos$1:function(r,n){return 1/0},exp$1:function(r,n){return 1/0},log$1:function(r,n){return 1/0},sqrt$1:function(r,n){return 1/0},add$2:function(r,n){return Math.max(l(r[0],n),l(r[1],n))},sub$2:function(r,n){return Math.max(l(r[0],n),l(r[1],n))},mult$2:function(r,n){return l(r[0],n)+l(r[1],n)},div$2:function(r,n){return 0===l(r[1],n)?l(r[0],n):1/0},pow$2:function(n,e){return 0===l(n[1],e)?l(n[0],e)*r.evaluate(n[1]).value.real:1/0},";":function(n,e){return"void"===n[1].ctype?l(n[0],e):(r.evaluate(n[0]),l(n[1],e))}},o={"+":"add$2","-":"sub$2","*":"mult$2","/":"div$2","^":"pow$2"},a=function(r,n){return"variable"===r.ctype&&n[r.name]?n[r.name]:(r.args&&(r.args=r.args.map((function(r){return a(r,n)}))),r)},f=function(r,n){return r&&"number"===r.ctype&&0===r.value.imag&&r.value.real===n},c=function(n){if(n.args&&(n.args=n.args.map(c),n.args.every((function(r){return"number"===r.ctype}))))return r.evaluate(n);if("add$2"===n.oper||"+"===n.oper){if(f(n.args[0],0))return n.args[1];if(f(n.args[1],0))return n.args[0]}else if("sub$2"===n.oper||"-"===n.oper){if(f(n.args[1],0))return n.args[0]}else if("mult$2"===n.oper||"*"===n.oper){if(f(n.args[0],0)||f(n.args[1],0))return e(0);if(f(n.args[0],1))return n.args[1];if(f(n.args[1],1))return n.args[0]}else if(("pow$2"===n.oper||"^"===n.oper)&&f(n.args[1],1))return n.args[0];return n},s=function(i,c){if("variable"===i.ctype)return c[i.name]?c[i.name]:e(0);if("number"===i.ctype)return e(0);if("infix"===i.ctype||"function"===i.ctype){var l=r.getMyfunction(i.oper),p=e(0),g={};if(l)for(var $ in i.args)g[l.arglist[$].name]=i.args[$];for(var m in i.args){$=s(i.args[m],c);var d=e(0);f($,0)||(l?((d={})[l.arglist[m].name]=e(1),d=a(n(s(n(l.body),d)),g)):u[o[i.oper]||i.oper]&&(d=u[o[i.oper]||i.oper](i.args)[m]),f(d,0)||(f($,1)||(d=t("mult$2",[d,$])),p=f(p,0)?d:t("add$2",[p,d])))}return p}return console.error("Do not know how to differentiate:"),console.log(i),e(0)},l=function(e,t){if("variable"===e.ctype)return t[e.name]?t[e.name]:0;if("number"===e.ctype)return 0;if("infix"===e.ctype||"function"===e.ctype){if(";"!=e.oper&&e.args.every((function(r){return 0===l(r,t)})))return 0;var u=r.getMyfunction(e.oper);if(u){var a,f={};for(a in e.args)f[u.arglist[a].name]=l(e.args[a],t);return l(c(n(u.body)),f)}if(u=i[o[e.oper]||e.oper])return u(e.args,t)}else if("void"===e.ctype)return 0;return console.log("Do not know how to compute the degree of:"),console.log(e),1/0};r.defineFunction("diff",3,(function(t,u){return u={},t[1].name?(u[t[1].name]=e(1),u=c(s(n(t[0]),u)),r.evaluate(a(n(t[2]),{"#":u}))):r.nada})),r.defineFunction("simplify",2,(function(e,t){return r.evaluate(a(n(e[1]),{"#":c(n(e[0]))}))}));for(var p=function(t,u){for(var i in u={},t)if(1<=i){if("variable"!==t[i].ctype)return r.nada;u[t[i].name]=1}return 1/0==(t=l(c(n(t[0])),u))&&(t=-1),e(t)},g=1;3>=g;g++)r.defineFunction("degree",1+g,p)}))}).call(this);
//# sourceMappingURL=index.031b0d5a.js.map
